<view class="container">
  <!-- çŠ¶æ€æ  -->
  <view class="status-bar">
    <text class="status-text">æ¨¡å¼: {{serverStatus.mode || 'æœªçŸ¥'}}</text>
    <text class="status-text">AI: {{serverStatus.ai_enabled ? 'å¯ç”¨' : 'æ¨¡æ‹Ÿ'}}</text>
    <text class="update-time">æ›´æ–°: {{lastUpdated}}</text>
  </view>

  <!-- æ¯æ—¥æ€»ç»“å¡ç‰‡ -->
  <view class="summary-card">
    <view class="card-header">
      <text class="card-title">ğŸ¤– AIæ¯æ—¥å°ç»“</text>
      <text class="refresh-icon" bindtap="refreshAll">ğŸ”„</text>
    </view>
    <scroll-view class="summary-content" scroll-y>
      <text class="summary-text">{{summary}}</text>
    </scroll-view>
  </view>

  <!-- äº‹ä»¶åˆ—è¡¨ -->
  <view class="section-title">
    <text>ğŸ“… ä»Šæ—¥é‡è¦äº‹ä»¶ ({{events.length}})</text>
  </view>

  <scroll-view class="event-list" scroll-y refresher-enabled="{{true}}" bindrefresherrefresh="onRefresh" refresher-triggered="{{isRefreshing}}">
    <view class="event-item" wx:for="{{events}}" wx:key="id" bindtap="goToDetail" data-event="{{item}}">
      <!-- äº‹ä»¶å¤´éƒ¨ -->
      <view class="event-header">
        <view class="time-country">
          <text class="time">{{item.time}}</text>
          <text class="country">{{item.country}}</text>
        </view>
        <view class="importance-badge">
          <text class="badge-text" wx:if="{{item.importance >= 3}}">é«˜</text>
          <text class="badge-text" wx:elif="{{item.importance >= 2}}">ä¸­</text>
          <text class="badge-text" wx:else>ä½</text>
        </view>
      </view>

      <!-- äº‹ä»¶åç§° -->
      <text class="event-name">{{item.name}}</text>

      <!-- æ•°æ®å¯¹æ¯” -->
      <view class="data-row">
        <view class="data-item">
          <text class="data-label">é¢„æœŸ</text>
          <text class="data-value forecast">{{item.forecast || '-'}}</text>
        </view>
        <view class="data-item">
          <text class="data-label">å‰å€¼</text>
          <text class="data-value previous">{{item.previous || '-'}}</text>
        </view>
        <view class="data-item" wx:if="{{item.actual}}">
          <text class="data-label">å®é™…</text>
          <text class="data-value actual">{{item.actual}}</text>
        </view>
      </view>

      <!-- AIåˆ†æé¢„è§ˆ -->
      <view class="ai-section">
        <text class="ai-label">ğŸ¤– AIåˆ†æ</text>
        <text class="ai-preview">{{item.ai_analysis}}</text>
      </view>

      <!-- è´§å¸æ ‡ç­¾ -->
      <view class="currency-tag">
        <text>ğŸ’± {{item.currency}}</text>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{events.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ“Š</text>
      <text class="empty-text">æš‚æ— äº‹ä»¶æ•°æ®</text>
      <button class="retry-btn" bindtap="loadData">é‡æ–°åŠ è½½</button>
    </view>
  </scroll-view>

  <!-- åŠ è½½æç¤º -->
  <view wx:if="{{loading}}" class="loading-overlay">
    <view class="loading-content">
      <text class="loading-icon">â³</text>
      <text>æ­£åœ¨åŠ è½½æ•°æ®...</text>
    </view>
  </view>
</view>